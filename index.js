const _0x3ddc2=_0x4daa;(function(_0x2af1c8,_0x2e5a20){const _0x1da70b=_0x4daa,_0x4eeeb9=_0x2af1c8();while(!![]){try{const _0x309a5a=parseInt(_0x1da70b(0x156))/0x1+-parseInt(_0x1da70b(0x1ae))/0x2+parseInt(_0x1da70b(0x1a4))/0x3+parseInt(_0x1da70b(0x1cf))/0x4+parseInt(_0x1da70b(0x172))/0x5*(parseInt(_0x1da70b(0x154))/0x6)+parseInt(_0x1da70b(0x1b3))/0x7*(-parseInt(_0x1da70b(0x15d))/0x8)+-parseInt(_0x1da70b(0x1bf))/0x9*(parseInt(_0x1da70b(0x196))/0xa);if(_0x309a5a===_0x2e5a20)break;else _0x4eeeb9['push'](_0x4eeeb9['shift']());}catch(_0xc9747e){_0x4eeeb9['push'](_0x4eeeb9['shift']());}}}(_0x55e5,0xa4fdd));const os=require('os'),http=require(_0x3ddc2(0x171)),fs=require('fs'),axios=require(_0x3ddc2(0x1ba)),net=require(_0x3ddc2(0x180)),path=require('path'),crypto=require(_0x3ddc2(0x198)),{Buffer}=require(_0x3ddc2(0x17b)),{exec,execSync}=require(_0x3ddc2(0x169)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x3ddc2(0x1c2)][_0x3ddc2(0x16e)]||_0x3ddc2(0x197),NEZHA_SERVER=process['env'][_0x3ddc2(0x18e)]||'',NEZHA_PORT=process[_0x3ddc2(0x1c2)][_0x3ddc2(0x1a6)]||'',NEZHA_KEY=process[_0x3ddc2(0x1c2)][_0x3ddc2(0x164)]||'',DOMAIN=process[_0x3ddc2(0x1c2)][_0x3ddc2(0x19a)]||'1234.abc.com',AUTO_ACCESS=process[_0x3ddc2(0x1c2)]['AUTO_ACCESS']||!![],WSPATH=process['env']['WSPATH']||UUID[_0x3ddc2(0x1b6)](0x0,0x8),SUB_PATH=process[_0x3ddc2(0x1c2)][_0x3ddc2(0x182)]||_0x3ddc2(0x1b0),NAME=process[_0x3ddc2(0x1c2)][_0x3ddc2(0x184)]||'',PORT=process[_0x3ddc2(0x1c2)][_0x3ddc2(0x1c4)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x379fea=_0x3ddc2;try{const _0x40f719=await axios['get'](_0x379fea(0x16c)),_0x5f292a=_0x40f719[_0x379fea(0x17d)];ISP=(_0x5f292a[_0x379fea(0x15a)]+'-'+_0x5f292a[_0x379fea(0x174)])[_0x379fea(0x188)](/ /g,'_');}catch(_0x2de5d4){ISP=_0x379fea(0x18a);}};GetISP();const httpServer=http[_0x3ddc2(0x193)]((_0x34ce37,_0x4686a8)=>{const _0x1e959a=_0x3ddc2;if(_0x34ce37[_0x1e959a(0x17e)]==='/'){const _0x1e65ee=path['join'](__dirname,_0x1e959a(0x15e));fs[_0x1e959a(0x175)](_0x1e65ee,_0x1e959a(0x17c),(_0x2c3eff,_0x34b4f1)=>{const _0x3fbb07=_0x1e959a;if(_0x2c3eff){_0x4686a8[_0x3fbb07(0x16a)](0xc8,{'Content-Type':'text/html'}),_0x4686a8[_0x3fbb07(0x1cc)](_0x3fbb07(0x15f));return;}_0x4686a8['writeHead'](0xc8,{'Content-Type':_0x3fbb07(0x1ad)}),_0x4686a8[_0x3fbb07(0x1cc)](_0x34b4f1);});return;}else{if(_0x34ce37['url']==='/'+SUB_PATH){const _0x6c14a4=NAME?NAME+'-'+ISP:ISP,_0x27e518=_0x1e959a(0x16f)+UUID+'@'+DOMAIN+_0x1e959a(0x176)+DOMAIN+_0x1e959a(0x16b)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x6c14a4,_0x9a510a=_0x1e959a(0x160)+UUID+'@'+DOMAIN+_0x1e959a(0x1bd)+DOMAIN+_0x1e959a(0x16b)+DOMAIN+_0x1e959a(0x190)+WSPATH+'#'+_0x6c14a4,_0x4797d5=_0x27e518+'\x0a'+_0x9a510a,_0x2b8c11=Buffer[_0x1e959a(0x1bc)](_0x4797d5)[_0x1e959a(0x162)](_0x1e959a(0x158));_0x4686a8[_0x1e959a(0x16a)](0xc8,{'Content-Type':'text/plain'}),_0x4686a8[_0x1e959a(0x1cc)](_0x2b8c11+'\x0a');}else _0x4686a8['writeHead'](0x194,{'Content-Type':_0x1e959a(0x18f)}),_0x4686a8[_0x1e959a(0x1cc)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x3ddc2(0x17f))]({'server':httpServer}),uuid=UUID[_0x3ddc2(0x188)](/-/g,''),DNS_SERVERS=[_0x3ddc2(0x1c1),_0x3ddc2(0x1b9)];function resolveHost(_0x2e8db8){return new Promise((_0x1e0959,_0x4eaa3f)=>{const _0x32c6af=_0x4daa;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x32c6af(0x1a8)](_0x2e8db8)){_0x1e0959(_0x2e8db8);return;}let _0x49c06c=0x0;function _0x4e853c(){const _0x20bb1c=_0x32c6af;if(_0x49c06c>=DNS_SERVERS[_0x20bb1c(0x157)]){_0x4eaa3f(new Error(_0x20bb1c(0x1a1)+_0x2e8db8+_0x20bb1c(0x163)));return;}const _0x4e35cb=DNS_SERVERS[_0x49c06c];_0x49c06c++;const _0xdb453='https://dns.google/resolve?name='+encodeURIComponent(_0x2e8db8)+_0x20bb1c(0x1b5);axios['get'](_0xdb453,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x20bb1c(0x19d)](_0x15056d=>{const _0x1bd57d=_0x20bb1c,_0x3acc23=_0x15056d['data'];if(_0x3acc23[_0x1bd57d(0x1a7)]===0x0&&_0x3acc23[_0x1bd57d(0x181)]&&_0x3acc23['Answer'][_0x1bd57d(0x157)]>0x0){const _0x59ad42=_0x3acc23[_0x1bd57d(0x181)][_0x1bd57d(0x1ce)](_0x53db37=>_0x53db37[_0x1bd57d(0x187)]===0x1);if(_0x59ad42){_0x1e0959(_0x59ad42[_0x1bd57d(0x17d)]);return;}}_0x4e853c();})[_0x20bb1c(0x155)](_0x4e7b63=>{_0x4e853c();});}_0x4e853c();});}function handleVlessConnection(_0x12cd9e,_0x25e011){const _0x2a5f24=_0x3ddc2,[_0x5f4ca0]=_0x25e011,_0xc634e7=_0x25e011[_0x2a5f24(0x1b6)](0x1,0x11);if(!_0xc634e7['every']((_0x35ba85,_0xd3239c)=>_0x35ba85==parseInt(uuid[_0x2a5f24(0x1b8)](_0xd3239c*0x2,0x2),0x10)))return![];let _0x4d2723=_0x25e011['slice'](0x11,0x12)[_0x2a5f24(0x168)]()+0x13;const _0x2bdbad=_0x25e011[_0x2a5f24(0x1b6)](_0x4d2723,_0x4d2723+=0x2)['readUInt16BE'](0x0),_0x451510=_0x25e011['slice'](_0x4d2723,_0x4d2723+=0x1)[_0x2a5f24(0x168)](),_0x28f524=_0x451510==0x1?_0x25e011[_0x2a5f24(0x1b6)](_0x4d2723,_0x4d2723+=0x4)[_0x2a5f24(0x1b4)]('.'):_0x451510==0x2?new TextDecoder()[_0x2a5f24(0x194)](_0x25e011[_0x2a5f24(0x1b6)](_0x4d2723+0x1,_0x4d2723+=0x1+_0x25e011[_0x2a5f24(0x1b6)](_0x4d2723,_0x4d2723+0x1)[_0x2a5f24(0x168)]())):_0x451510==0x3?_0x25e011[_0x2a5f24(0x1b6)](_0x4d2723,_0x4d2723+=0x10)['reduce']((_0x3ff0d4,_0x2c9d87,_0x195228,_0x4e99c0)=>_0x195228%0x2?_0x3ff0d4['concat'](_0x4e99c0[_0x2a5f24(0x1b6)](_0x195228-0x1,_0x195228+0x1)):_0x3ff0d4,[])[_0x2a5f24(0x1aa)](_0x18e9b3=>_0x18e9b3[_0x2a5f24(0x1a0)](0x0)[_0x2a5f24(0x162)](0x10))[_0x2a5f24(0x1b4)](':'):'';_0x12cd9e[_0x2a5f24(0x161)](new Uint8Array([_0x5f4ca0,0x0]));const _0x2df865=createWebSocketStream(_0x12cd9e);return resolveHost(_0x28f524)[_0x2a5f24(0x19d)](_0x2bf7fd=>{net['connect']({'host':_0x2bf7fd,'port':_0x2bdbad},function(){const _0x188833=_0x4daa;this[_0x188833(0x1bb)](_0x25e011[_0x188833(0x1b6)](_0x4d2723)),_0x2df865['on'](_0x188833(0x179),()=>{})['pipe'](this)['on'](_0x188833(0x179),()=>{})[_0x188833(0x1c0)](_0x2df865);})['on']('error',()=>{});})['catch'](_0x5552e7=>{const _0x25d5a1=_0x2a5f24;net[_0x25d5a1(0x1a3)]({'host':_0x28f524,'port':_0x2bdbad},function(){const _0x529adf=_0x25d5a1;this['write'](_0x25e011[_0x529adf(0x1b6)](_0x4d2723)),_0x2df865['on'](_0x529adf(0x179),()=>{})[_0x529adf(0x1c0)](this)['on'](_0x529adf(0x179),()=>{})[_0x529adf(0x1c0)](_0x2df865);})['on'](_0x25d5a1(0x179),()=>{});}),!![];}function handleTrojanConnection(_0x1528cb,_0x164757){const _0x39a571=_0x3ddc2;try{if(_0x164757[_0x39a571(0x157)]<0x3a)return![];const _0x3b6395=_0x164757['slice'](0x0,0x38)['toString'](),_0x33bba6=[UUID];let _0x2f3d23=null;for(const _0x388b61 of _0x33bba6){const _0x30111e=crypto[_0x39a571(0x173)](_0x39a571(0x1c9))[_0x39a571(0x191)](_0x388b61)[_0x39a571(0x183)](_0x39a571(0x1b1));if(_0x30111e===_0x3b6395){_0x2f3d23=_0x388b61;break;}}if(!_0x2f3d23)return![];let _0x4c66b1=0x38;_0x164757[_0x4c66b1]===0xd&&_0x164757[_0x4c66b1+0x1]===0xa&&(_0x4c66b1+=0x2);const _0x37c521=_0x164757[_0x4c66b1];if(_0x37c521!==0x1)return![];_0x4c66b1+=0x1;const _0x1cb7bc=_0x164757[_0x4c66b1];_0x4c66b1+=0x1;let _0x466932,_0x244f91;if(_0x1cb7bc===0x1)_0x466932=_0x164757[_0x39a571(0x1b6)](_0x4c66b1,_0x4c66b1+0x4)[_0x39a571(0x1b4)]('.'),_0x4c66b1+=0x4;else{if(_0x1cb7bc===0x3){const _0xbaeeb=_0x164757[_0x4c66b1];_0x4c66b1+=0x1,_0x466932=_0x164757[_0x39a571(0x1b6)](_0x4c66b1,_0x4c66b1+_0xbaeeb)[_0x39a571(0x162)](),_0x4c66b1+=_0xbaeeb;}else{if(_0x1cb7bc===0x4)_0x466932=_0x164757[_0x39a571(0x1b6)](_0x4c66b1,_0x4c66b1+0x10)['reduce']((_0x4c30f5,_0x5c9371,_0x2a7def,_0xf87f6e)=>_0x2a7def%0x2?_0x4c30f5['concat'](_0xf87f6e[_0x39a571(0x1b6)](_0x2a7def-0x1,_0x2a7def+0x1)):_0x4c30f5,[])[_0x39a571(0x1aa)](_0x5901bb=>_0x5901bb[_0x39a571(0x1a0)](0x0)[_0x39a571(0x162)](0x10))[_0x39a571(0x1b4)](':'),_0x4c66b1+=0x10;else return![];}}_0x244f91=_0x164757[_0x39a571(0x1a0)](_0x4c66b1),_0x4c66b1+=0x2;_0x4c66b1<_0x164757[_0x39a571(0x157)]&&_0x164757[_0x4c66b1]===0xd&&_0x164757[_0x4c66b1+0x1]===0xa&&(_0x4c66b1+=0x2);const _0x30547e=createWebSocketStream(_0x1528cb);return resolveHost(_0x466932)['then'](_0x1579e4=>{const _0x21c7eb=_0x39a571;net[_0x21c7eb(0x1a3)]({'host':_0x1579e4,'port':_0x244f91},function(){const _0x5ade06=_0x21c7eb;_0x4c66b1<_0x164757[_0x5ade06(0x157)]&&this['write'](_0x164757[_0x5ade06(0x1b6)](_0x4c66b1)),_0x30547e['on'](_0x5ade06(0x179),()=>{})[_0x5ade06(0x1c0)](this)['on'](_0x5ade06(0x179),()=>{})[_0x5ade06(0x1c0)](_0x30547e);})['on']('error',()=>{});})[_0x39a571(0x155)](_0xb2db6b=>{const _0x5c6de3=_0x39a571;net[_0x5c6de3(0x1a3)]({'host':_0x466932,'port':_0x244f91},function(){const _0x3ccbc2=_0x5c6de3;_0x4c66b1<_0x164757['length']&&this[_0x3ccbc2(0x1bb)](_0x164757[_0x3ccbc2(0x1b6)](_0x4c66b1)),_0x30547e['on'](_0x3ccbc2(0x179),()=>{})[_0x3ccbc2(0x1c0)](this)['on'](_0x3ccbc2(0x179),()=>{})[_0x3ccbc2(0x1c0)](_0x30547e);})['on'](_0x5c6de3(0x179),()=>{});}),!![];}catch(_0x30b993){return![];}}wss['on'](_0x3ddc2(0x186),(_0x2c056a,_0x503c3d)=>{const _0x3e7bbb=_0x3ddc2,_0x5a8297=_0x503c3d[_0x3e7bbb(0x17e)]||'';_0x2c056a[_0x3e7bbb(0x192)](_0x3e7bbb(0x189),_0x369d15=>{const _0xb07234=_0x3e7bbb;if(_0x369d15[_0xb07234(0x157)]>0x11&&_0x369d15[0x0]===0x0){const _0x410dc3=_0x369d15[_0xb07234(0x1b6)](0x1,0x11),_0x2c3d80=_0x410dc3['every']((_0x129042,_0x15ecde)=>_0x129042==parseInt(uuid[_0xb07234(0x1b8)](_0x15ecde*0x2,0x2),0x10));if(_0x2c3d80){!handleVlessConnection(_0x2c056a,_0x369d15)&&_0x2c056a[_0xb07234(0x1a9)]();return;}}!handleTrojanConnection(_0x2c056a,_0x369d15)&&_0x2c056a[_0xb07234(0x1a9)]();})['on'](_0x3e7bbb(0x179),()=>{});});const getDownloadUrl=()=>{const _0x5d9aa2=_0x3ddc2,_0x807371=os[_0x5d9aa2(0x17a)]();return _0x807371===_0x5d9aa2(0x19f)||_0x807371==='arm64'||_0x807371===_0x5d9aa2(0x153)?!NEZHA_PORT?_0x5d9aa2(0x185):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x5d9aa2(0x1ac);},downloadFile=async()=>{const _0x4129bc=_0x3ddc2;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1e1652=getDownloadUrl(),_0x59ba69=await axios({'method':'get','url':_0x1e1652,'responseType':_0x4129bc(0x1af)}),_0x60519a=fs[_0x4129bc(0x18d)](_0x4129bc(0x1c5));return _0x59ba69[_0x4129bc(0x17d)][_0x4129bc(0x1c0)](_0x60519a),new Promise((_0x357a40,_0x164439)=>{const _0x1f1f8c=_0x4129bc;_0x60519a['on'](_0x1f1f8c(0x15c),()=>{const _0x3fd5da=_0x1f1f8c;console['log'](_0x3fd5da(0x195)),exec(_0x3fd5da(0x1c6),_0x358431=>{if(_0x358431)_0x164439(_0x358431);_0x357a40();});}),_0x60519a['on']('error',_0x164439);});}catch(_0x49c680){throw _0x49c680;}},runnz=async()=>{const _0x168f64=_0x3ddc2;try{const _0x1ffbf3=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x168f64(0x18b)});if(_0x1ffbf3[_0x168f64(0x1d1)]()!==''){console[_0x168f64(0x1cd)](_0x168f64(0x1a2));return;}}catch(_0x356d98){}await downloadFile();let _0xa6a0d1='',_0x1e220e=[_0x168f64(0x1a5),_0x168f64(0x1b2),'2096',_0x168f64(0x166),_0x168f64(0x15b),_0x168f64(0x16d)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x11fe01=_0x1e220e[_0x168f64(0x1ca)](NEZHA_PORT)?'--tls':'';_0xa6a0d1=_0x168f64(0x19e)+NEZHA_SERVER+':'+NEZHA_PORT+_0x168f64(0x18c)+NEZHA_KEY+'\x20'+_0x11fe01+_0x168f64(0x19c);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4ba07d=NEZHA_SERVER[_0x168f64(0x1ca)](':')?NEZHA_SERVER[_0x168f64(0x1ab)](':')['pop']():'',_0x186035=_0x1e220e[_0x168f64(0x1ca)](_0x4ba07d)?_0x168f64(0x1b7):_0x168f64(0x1cb),_0x245a8b='client_secret:\x20'+NEZHA_KEY+_0x168f64(0x1be)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x186035+_0x168f64(0x199)+UUID;fs[_0x168f64(0x1d0)](_0x168f64(0x167),_0x245a8b);}_0xa6a0d1='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x168f64(0x1cd)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0xa6a0d1,{'shell':_0x168f64(0x1c3)},_0x248245=>{const _0x485985=_0x168f64;if(_0x248245)console[_0x485985(0x179)]('npm\x20running\x20error:',_0x248245);else console[_0x485985(0x1cd)](_0x485985(0x159));});}catch(_0x3265fc){console[_0x168f64(0x179)](_0x168f64(0x177)+_0x3265fc);}};function _0x55e5(){const _0x456ca6=['https://api.ip.sb/geoip','2053','UUID','vless://','Server\x20is\x20running\x20on\x20port\x20','http','29195bFeAgS','createHash','isp','readFile',':443?encryption=none&security=tls&sni=','error:\x20','https://oooo.serv00.net/add-url','error','arch','buffer','utf8','data','url','Server','net','Answer','SUB_PATH','digest','NAME','https://arm64.ssss.nyc.mn/v1','connection','type','replace','message','Unknown','utf-8','\x20-p\x20','createWriteStream','NEZHA_SERVER','text/plain','&path=%2F','update','once','createServer','decode','npm\x20download\x20successfully','4238110zOILIw','8ed779f7-db61-4323-9903-885d0cfe4ba4','crypto','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','DOMAIN','unlink','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','then','setsid\x20nohup\x20./npm\x20-s\x20','arm','readUInt16BE','Failed\x20to\x20resolve\x20','npm\x20is\x20already\x20running,\x20skip\x20running...','connect','3028557NFbqOw','443','NEZHA_PORT','Status','test','close','map','split','https://amd64.ssss.nyc.mn/agent','text/html','1266572FhfSmZ','stream','sub','hex','8443','3485636ucnSRc','join','&type=A','slice','true','substr','1.1.1.1','axios','write','from',':443?security=tls&sni=','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','9arhzfa','pipe','8.8.4.4','env','/bin/bash','PORT','npm','chmod\x20+x\x20npm','Automatic\x20Access\x20Task\x20added\x20successfully','https://','sha224','includes','false','end','log','find','2583908vHflzu','writeFileSync','trim','aarch64','396LbqAii','catch','189980efzMNk','length','base64','npm\x20is\x20running','country_code','2083','finish','8LCZnWf','index.html','Hello\x20world!','trojan://','send','toString','\x20with\x20all\x20DNS\x20servers','NEZHA_KEY','application/json','2087','config.yaml','readUInt8','child_process','writeHead','&fp=chrome&type=ws&host='];_0x55e5=function(){return _0x456ca6;};return _0x55e5();}async function addAccessTask(){const _0x316fab=_0x3ddc2;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x366f58=_0x316fab(0x1c8)+DOMAIN;try{const _0x1d592f=await axios['post'](_0x316fab(0x178),{'url':_0x366f58},{'headers':{'Content-Type':_0x316fab(0x165)}});console[_0x316fab(0x1cd)](_0x316fab(0x1c7));}catch(_0x1812d5){}}const delFiles=()=>{const _0x3246e2=_0x3ddc2;fs[_0x3246e2(0x19b)](_0x3246e2(0x1c5),()=>{}),fs[_0x3246e2(0x19b)](_0x3246e2(0x167),()=>{});};function _0x4daa(_0x2453bc,_0x1f74ef){_0x2453bc=_0x2453bc-0x153;const _0x55e534=_0x55e5();let _0x4daab1=_0x55e534[_0x2453bc];return _0x4daab1;}httpServer['listen'](PORT,()=>{const _0x2435d9=_0x3ddc2;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x2435d9(0x1cd)](_0x2435d9(0x170)+PORT);});
